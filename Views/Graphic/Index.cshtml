@model game_trends_explorer.Models.GraphicViewModel;
@using ChartJSCore.Models;
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.js"></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> 

@{
    ViewData["Title"] = "Graphic View";

    Chart chart = (Chart)ViewData["chart"];
}

@section Head {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha512-UXumZrZNiOwnTcZSHLOfcTs0aos2MzBWHXOHOuB0J/R44QB0dwY5JgfbvljXcklVf65Gc4El6RjZ+lnwd2az2g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/1.2.1/chartjs-plugin-zoom.min.js" integrity="sha512-klQv6lz2YR+MecyFYMFRuU2eAl8IPRo6zHnsc9n142TJuJHS8CG0ix4Oq9na9ceeg1u5EkBfZsFcV3U7J51iew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
}

<h1>Graphic View</h1>

<div id="chartDisplay" class="card col-md-6">
    <div class="chart-body">
        <h4 class="card-title">Your Generated Chart:</h4>
        <canvas id="Chart"></canvas>
        To save as an image, right-click on the chart.
    </div>
</div>


<div class="w3-bar">
    <button class="tablink" onclick="openTab(event, 'Bar')">Bar</button>
    <button class="tablink" onclick="openTab(event, 'Area')">Area</button>
    <button class="tablink" onclick="openTab(event, 'Line')">Line</button>
    <button class="tablink" onclick="openTab(event, 'Scatter')">Scatter</button>
    <button class="tablink" onclick="openTab(event, 'Bubble')">Bubble</button>
    <button class="tablink" onclick="openTab(event, 'Pie')">Pie</button>
    <button class="tablink" onclick="openTab(event, 'Doughnut')">Doughnut</button>
    <button class="tablink" onclick="openTab(event, 'Radar')">Radar</button>
    @* <button class="w3-bar-item w3-button tablink" onclick="openTab(event, 'Advanced')">Advanced</button> *@
</div>

<form id="Bar" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Bar</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        X-Axis: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
        Label: <input type="text" placeholder="Input" asp-for="xLabel"/>
    </div>
    <div>
        <section>
            Y-Axis: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
            Label: <input type="text" placeholder="Input" asp-for="yLabel"/>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Scale: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Bar Colors: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>

    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Area" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Area</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        X-Axis: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
        Label: <input type="text" placeholder="Input" asp-for="xLabel"/>
    </div>
    <div>
        <section>
            Y-Axis: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
            Label: <input type="text" placeholder="Input" asp-for="yLabel"/>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Scale: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Area Color: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>

    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Line" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Line</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        X-Axis: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
        Label: <input type="text" placeholder="Input" asp-for="xLabel"/>
    </div>
    <div>
        <section>
            Y-Axis: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
            Label: <input type="text" placeholder="Input" asp-for="yLabel"/>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Scale: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Line Color: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>

    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Scatter" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Scatter</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        X-Axis: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
        Label: <input type="text" placeholder="Input" asp-for="xLabel"/>
    </div>
    <div>
        <section>
            Y-Axis: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
            Label: <input type="text" placeholder="Input" asp-for="yLabel"/>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Scale: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Point Colors: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>
    
    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Bubble" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Bubble</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        X-Axis: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
        Label: <input type="text" placeholder="Input" asp-for="xLabel"/>
    </div>
    <div>
        <section>
            Y-Axis: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
            Label: <input type="text" placeholder="Input" asp-for="yLabel"/>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Scale: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Bubble Colors: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>
    
    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Pie" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Pie</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        Category: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
    </div>
    <div>
        <section>
            Stats: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Range: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Section Colors: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>
    
    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Doughnut" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Doughnut</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        Category: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
    </div>
    <div>
        <section>
            Stats: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Range: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Section Colors: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>
    
    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Radar" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Radar</option>
    </select>
    <div>
        Graphic Title: <input type="text" placeholder="Input" asp-for="Title"/>
    </div>
    <div>
        Category: <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
    </div>
    <div>
        <section>
            Stats: <select asp-for="yAxis" asp-items="Model.yAxes">
                <option value=""></option>
            </select>
        </section>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
        Range: <input type="text" placeholder="Min" asp-for="minScale"/> - 
            <input type="text" placeholder="Max" asp-for="maxScale"/>
    </div>
    <div>
        Fill Color: <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="Default"></option>
        </select>
    </div>
    
    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

<form id="Advanced" class="w3-container tab" asp-action="Index" method="get" style="display:none">
    <select class="chartType" asp-for="chartType">
        <option selected="selected">Advanced</option>
    </select>
    <p>Assign parameters to insert in your chart after it's generated.</p>
    <h3>Required Parameters:</h3>
    <div>
        chart.Data.Labels (X-Axis): <select asp-for="xAxis" asp-items="Model.xAxes">
            <option value=""></option>
        </select>
        chart.Data.Datasets[0].Data (Y-Axis): <select asp-for="yAxis" asp-items="Model.yAxes">
            <option value=""></option>
        </select>
    </div>

    <h3>Optional Parameters:</h3>
    <div>
        Border/BackgroundColor (Color Pallete): <select asp-for="colorPalette" asp-items="Model.colorPalettes">
            <option value="None"></option>
        </select>
    </div>

    <h3>Other Options:</h3>
    <div>
        Sort: <select asp-for="sortOrder" asp-items="Model.sorts">
            <option value="None"></option>
        </select>
    </div>

    <h3>new Chart()</h3>
    <p>Generate chart by manually writing it via JSON.</p>
    <textarea type="text" asp-for="chartCode" id="chartCode" rows="10" cols="50" white-space="pre" placeholder="Generate chart by manually writing it via JSON."></textarea>

    <section>
        <input type="submit" value="Generate" class="btn-default" />
    </section>
</form>

@section Scripts {
    @if (chart != null) {
        <script type="text/javascript">
            @Html.Raw(chart.CreateChartCode("Chart"));
        </script>
    }
    else {
        <script type="text/javascript">document.getElementById("chartDisplay").style.display = "none";</script>
    }
    <script type="text/javascript">
        function openTab(evt, tabName) {
            var i, x, tablinks;

            x = document.getElementsByClassName("tab");
            for (i = 0; i < x.length; i++) {
                x[i].style.display = "none";
            }

            tablinks = document.getElementsByClassName("tablink");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" w3-light-grey", "");
                tablinks[i].style.borderBottom = "1px solid #ccc !important";
            }

            document.getElementById(tabName).style.display = "block";

            evt.currentTarget.classList.add("w3-light-grey");
            evt.currentTarget.style.borderBottom = "none";

            var inputs = document.getElementsByTagName("input");
            for (var i = 0; i < inputs.length - 1; i++) {
                if (!inputs[i].classList.contains("btn-default"))
                    inputs[i].value = '';
            }

            var selects = document.getElementsByTagName("select");
            for (var i = 0; i < selects.length; i++) {
                if (!selects[i].classList.contains("chartType"))
                    selects[i].selectedIndex = -1;
            }

            document.getElementById("chartCode").value = '';
        }
    </script>
}